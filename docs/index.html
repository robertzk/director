<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Load, track, and manage dependencies in a file structure. • director</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="jquery.sticky-kit.min.js"></script><script src="pkgdown.js"></script><!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">director</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li>
  <a href="articles/index.html">Articles</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="contents col-md-9">
    
<div id="director-build-status-coverage-status-documentation-documentation-license-mit-join-the-chat-at-httpsgitter-imsyberialobby" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#director-build-status-coverage-status-documentation-documentation-license-mit-join-the-chat-at-httpsgitter-imsyberialobby" class="anchor"></a>Director <a href="https://travis-ci.org/syberia/director"><img src="https://travis-ci.org/syberia/director.svg?branch=master" alt="Build Status"></a> <a href="https://coveralls.io/r/syberia/director"><img src="https://coveralls.io/repos/github/syberia/director/badge.svg?branch=master" alt="Coverage Status"></a> <a href="http://syberia.io/docs/packages/director"><img src="https://img.shields.io/badge/docs-%E2%9C%93-900c3f.svg" alt="Documentation"></a> <a href="http://syberia.github.io/director/"><img src="https://img.shields.io/badge/rocco-%E2%9C%93-blue.svg" alt="Documentation"></a> <a href="https://github.com/syberia/syberia/blob/master/LICENSE"><img src="https://img.shields.io/badge/License-MIT-yellow.svg" alt="License: MIT"></a> <a href="https://gitter.im/syberia/Lobby"><img src="https://badges.gitter.im/Join%20Chat.svg" alt="Join the chat at https://gitter.im/syberia/Lobby"></a>
</h1></div>

<p>Director aims to partially solve the problem of project structure in R by re-defining R scripts as “resources” and allowing the developer to focus only on what is important: this makes code more modular and re-usable.</p>
</div>
<div id="example" class="section level1">
<h1 class="hasAnchor">
<a href="#example" class="anchor"></a>Example</h1>
<p>Suppose we wish to be able to read data in, perform some munging, and save it back to its source. One way to do this is as follows.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">data &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">'/some/file'</span>)
<span class="co"># Do some munging</span>
<span class="kw">write.csv</span>(data, <span class="st">'/some/file'</span>)</code></pre></div>
<p>This works, but there are some problems with it. We have tied the data-set to a specific source: a CSV file. What if we had hundreds of such scripts and wanted to migrate them to read and write from a database or an <a href="http://aws.amazon.com/s3">S3 location</a>? We would have to update <code>read.csv</code> in every file. The same applies if we want to add <code>stringsAsFactors = FALSE</code> to each <code>read.csv</code> call.</p>
<p>An alternative approach is to create a directory <code>adapters</code> that takes the following convention: any file in that directory must be of the following form.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">read &lt;-<span class="st"> </span><span class="cf">function</span>(key) {
  <span class="co"># Implement this.</span>
}

write &lt;-<span class="st"> </span><span class="cf">function</span>(value, key) {
  <span class="co"># Implement this.</span>
}</code></pre></div>
<p>For example, we could implement CSV reading and writing as:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># ./adapters/csv.R</span>
read &lt;-<span class="st"> </span><span class="cf">function</span>(key) {
  <span class="kw">read.csv</span>(<span class="kw">file.path</span>(<span class="st">"/some/path"</span>, <span class="kw">paste0</span>(key, <span class="st">".csv"</span>)))
}

write &lt;-<span class="st"> </span><span class="cf">function</span>(value, key) {
  <span class="kw">write.csv</span>(value, <span class="kw">file.path</span>(<span class="st">"/some/path"</span>, <span class="kw">paste0</span>(key, <span class="st">".csv"</span>)))
}</code></pre></div>
<p>Our original file could now become</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># ./our_script.R</span>
<span class="cf">function</span>(adapter) {
  data &lt;-<span class="st"> </span>adapter<span class="op">$</span><span class="kw">read</span>(<span class="st">"file1"</span>)
  <span class="co"># Munge the data.</span>
  adapter<span class="op">$</span><span class="kw">write</span>(data, <span class="st">"file1"</span>)
}</code></pre></div>
<p>But what is <code>adapter</code>? We now use director to create a special <code>adapter</code> object that will know how to read and write in the same format given a key.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># ./run.R</span>

<span class="co"># Initialize a "director" object. It is responsible for determining</span>
<span class="co"># what to do with files in the adapters directory (and eventually more).</span>
<span class="kw">library</span>(director)
d &lt;-<span class="st"> </span><span class="kw"><a href="reference/director.html">director</a></span>(<span class="st">"."</span>)

<span class="co"># We'll explain this later.</span>
d<span class="op">$</span><span class="kw"><a href="reference/register_parser.html">register_parser</a></span>(<span class="st">"/adapters"</span>, <span class="cf">function</span>(input) {
  <span class="kw">structure</span>(<span class="kw">list</span>(<span class="dt">read =</span> input<span class="op">$</span>read, <span class="dt">write =</span> input<span class="op">$</span>write), <span class="dt">class =</span> <span class="st">'adapter'</span>)
})

adapter  &lt;-<span class="st"> </span>d<span class="op">$</span><span class="kw"><a href="reference/resource.html">resource</a></span>(<span class="st">"adapters/file"</span>)<span class="op">$</span><span class="kw">value</span>() <span class="co"># we will explain $value() later</span>
resource &lt;-<span class="st"> </span>d<span class="op">$</span><span class="kw"><a href="reference/resource.html">resource</a></span>(<span class="st">"our_script.R"</span>)<span class="op">$</span><span class="kw">value</span>()
<span class="kw"><a href="reference/resource.html">resource</a></span>(adapter) <span class="co"># This will run our script and save the data.</span></code></pre></div>
<p>Our scripts no longer depend on CSV reading. If we moved all our CSV files to RDS files, we would only have to modify what adapter gets passed to each script.</p>
<p>Now imagine we have hundreds of such scripts. We can put them in <code>scripts</code> and use director to find all scripts.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">scripts &lt;-<span class="st"> </span>d<span class="op">$</span><span class="kw">find</span>(<span class="dt">base =</span> <span class="st">"scripts"</span>) <span class="co"># Find all .R files in the scripts directory</span>
<span class="co"># [1] "scripts/script1" "scripts/script2" ...</span>

<span class="kw">lapply</span>(scripts, <span class="cf">function</span>(script) {
  script &lt;-<span class="st"> </span>d<span class="op">$</span><span class="kw"><a href="reference/resource.html">resource</a></span>(script)<span class="op">$</span><span class="kw">value</span>()
  <span class="kw">script</span>(adapter)
})</code></pre></div>
<p>The above executes all scripts in the <code>scripts</code> directory using an adapter of our choice.</p>
</div>
<div id="installation" class="section level1">
<h1 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h1>
<p>Director is in active development and not yet available on CRAN (as of May 18, 2017). To install the latest development build directly from Github, run the following in the R console.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="cf">if</span> (<span class="op">!</span><span class="kw">require</span>(devtools)) <span class="kw">install.packages</span>(<span class="st">'devtools'</span>)
devtools<span class="op">::</span><span class="kw">install_github</span>(<span class="st">'syberia/director'</span>); <span class="kw">library</span>(director)</code></pre></div>
</div>
<div id="creating-a-director" class="section level1">
<h1 class="hasAnchor">
<a href="#creating-a-director" class="anchor"></a>Creating a director</h1>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">d &lt;-<span class="st"> </span><span class="kw"><a href="reference/director.html">director</a></span>(<span class="st">'~/your/R/projects/directory'</span>)</code></pre></div>
<p>You can now look for all files in your project using <code>d$find()</code>.</p>
<div id="license" class="section level3">
<h3 class="hasAnchor">
<a href="#license" class="anchor"></a>License</h3>
<p>This project is licensed under the MIT License:</p>
<p>Copyright (c) 2014-2017 Syberia, Avant, Robert Krzyzanowski</p>
<p>Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the “Software”), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:</p>
<p>The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.</p>
<p>THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</p>
</div>
<div id="authors" class="section level3">
<h3 class="hasAnchor">
<a href="#authors" class="anchor"></a>Authors</h3>
<p>This package was created by Robert Krzyzanowski, <a href="mailto:rob@syberia.io">rob@syberia.io</a> in late 2014.</p>
</div>
</div>

  </div>

  <div class="col-md-3" id="sidebar">
    <h2>License</h2>
<p><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file <a href="LICENSE">LICENSE</a></p>
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Robert Krzyzanowski <br><small class="roles"> Author, maintainer </small> </li>
</ul>
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="http://r-pkgs.had.co.nz/r.html">package development</a></li>
</ul>
</div>
</div>


      <footer><div class="copyright">
  <p>Developed by Robert Krzyzanowski.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  </body>
</html>
