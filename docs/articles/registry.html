<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title> â€¢ director</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script><script src="../pkgdown.js"></script><!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-vignette">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">director</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../articles/index.html">Articles</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9">
    <div class="page-header toc-ignore">
      <h1></h1>
            
          </div>

    
    
<div class="contents">
<!--
%\VignetteEngine{knitr}
%\VignetteIndexEntry{Using registries to maintain state between R sessions}
-->
<div id="using-registries-to-maintain-state-between-r-sessions" class="section level1">
<h1 class="hasAnchor">
<a href="#using-registries-to-maintain-state-between-r-sessions" class="anchor"></a>Using registries to maintain state between R sessions</h1>
<p>Frequently, there is a need to maintain state between consecutive R sessions without polluting the local project with temporary or configuration-related files.</p>
<p><code>director</code> aims to solve this problem by providing a <code>registry</code>, a simple wrapper around reading and writing to a directory that takes cares of checking for non-existent paths.</p>
<p>A registry should be used only internally by a project to store data it needs to maintain across R sessions (or amongst different R sessions) and should not be exposed to the user. This is because the keys you choose to store values under are purely convention, and you do not want to give someone the ability to overwrite them.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">r &lt;-<span class="st"> </span>registry<span class="op">$</span><span class="kw">new</span>(<span class="kw">file.path</span>(<span class="kw">dirname</span>(<span class="kw">tempfile</span>()), <span class="st">'.registry'</span>))
<span class="co"># You don't have to use .registry, but making the directory hidden is preferable</span>
<span class="co"># as it is for internal use only.</span>

r<span class="op">$</span><span class="kw">set</span>(<span class="st">'some/key'</span>, <span class="kw">list</span>(<span class="st">'some'</span>, <span class="dv">5</span>, <span class="st">'value'</span>))
value &lt;-<span class="st"> </span>r<span class="op">$</span><span class="kw">get</span>(<span class="st">'some/key'</span>) <span class="co"># value is now the above list.</span>
<span class="kw">print</span>(value)</code></pre></div>
<pre><code>## [[1]]
## [1] "some"
## 
## [[2]]
## [1] 5
## 
## [[3]]
## [1] "value"</code></pre>
<p>You can perform complicated logic with this.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">projects &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dt">proj1 =</span> <span class="kw">list</span>(<span class="dt">config_key1 =</span> <span class="st">'config_value1'</span>, <span class="dt">config_key2 =</span> <span class="st">'config_value2'</span>),
                 <span class="dt">proj2 =</span> <span class="kw">list</span>(<span class="dt">config_key1 =</span> <span class="st">'settings_value1'</span>, <span class="dt">config_key2 =</span> <span class="st">'settings_value2'</span>))
<span class="cf">for</span> (name <span class="cf">in</span> <span class="kw">names</span>(projects)) r<span class="op">$</span><span class="kw">set</span>(<span class="kw">file.path</span>(name, <span class="st">'config'</span>), projects[[name]])
<span class="kw">print</span>(<span class="kw">sapply</span>(<span class="kw">names</span>(projects), <span class="cf">function</span>(name) r<span class="op">$</span><span class="kw">get</span>(<span class="kw">file.path</span>(name, <span class="st">'config'</span>))<span class="op">$</span>config_key1))</code></pre></div>
<pre><code>##             proj1             proj2 
##   "config_value1" "settings_value1"</code></pre>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#using-registries-to-maintain-state-between-r-sessions">Using registries to maintain state between R sessions</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Robert Krzyzanowski.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  </body>
</html>
